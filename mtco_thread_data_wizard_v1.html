<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MTCO — Thread Data Wizard (v1)</title>
<style>
:root{
  --bg:#0f1215; --card:#171b21; --border:#2b3139; --text:#e6e8eb; --muted:#8a9097;
  --accent:#ff7a1a; --accent2:#ffa864; --radius:16px;
  --fs-body:14px; --lh-body:1.45; --fs-small:12px; --fs-title:16px; --fs-card:14px;
}
body{font:600 var(--fs-body)/var(--lh-body) ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--text);background:var(--bg);margin:0}
small,.muted,label{font-size:var(--fs-small);color:var(--muted)}
h1{font-size:var(--fs-title);margin:0 0 8px 0}
h2{font-size:var(--fs-card);margin:0 0 6px 0}
.container{max-width:1220px;margin:24px auto;padding:0 24px}
.grid{display:grid;grid-template-columns:380px 1fr;gap:16px}
.card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:14px}
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
input,select{background:#0f1215;border:1px solid var(--border);color:var(--text);padding:8px 10px;border-radius:10px;min-width:90px}
input[type=number]{width:120px}
.btn{background:#1f242b;border:1px solid var(--border);color:var(--text);border-radius:12px;padding:8px 12px;cursor:pointer}
.btn.primary{background:var(--accent);border-color:transparent;color:#111;font-weight:800}
.kv{display:grid;grid-template-columns:220px 1fr;gap:8px 10px;align-items:center}
.kv .v{font-weight:700}
.table{width:100%;border-collapse:collapse;margin-top:8px}
.table th,.table td{border:1px solid var(--border);padding:8px;text-align:left}
.table th{background:#1a1f26;font-weight:700}
.badge{background:#1f242b;border:1px solid var(--border);border-radius:999px;padding:4px 8px}
hr{border:none;border-top:1px solid var(--border);margin:12px 0}
.note{color:var(--muted)}
.print-hint{margin-top:8px}
@media (max-width: 980px){ .grid{grid-template-columns:1fr;}} 
@media print{
  body{background:#fff;color:#111}
  .card{background:#fff;border-color:#bbb}
  .btn,.note,.print-hint{display:none}
  .container{max-width:1220px;margin:24px auto;padding:0 24px}
  a{color:#000}
}
</style>
<style>

/* === MTCO Unified Header v1.3 — Thread Data Wizard === */
:root{
  --mtco-bg: #0f1215;
  --mtco-panel: #161a1f;
  --mtco-border: #2a3037;
  --mtco-text: #e6e8eb;
  --mtco-muted: #a7aeb6;
  --mtco-accent: #ff7a1a;
}
.mtco-header{
  position:sticky; top:0; z-index:1200;
  background:linear-gradient(0deg,rgba(15,18,21,.65),rgba(15,18,21,.95));
  backdrop-filter:saturate(1.2) blur(8px);
  border-bottom:1px solid var(--mtco-border);
}
.mtco-hwrap{max-width:1220px;margin:0 auto;padding:12px 24px;display:flex;align-items:center;gap:12px}
.mtco-logo{
  width:26px; height:26px; border-radius:8px;
  background:radial-gradient(circle at 30% 30%, #ff9d57 0 35%, #ff7a1a 36% 70%, #c35200 71% 100%);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.08)
}
.mtco-brand{display:flex; flex-direction:column; line-height:1}
.mtco-title{font-weight:900; letter-spacing:.3px; color:var(--mtco-text); font-size:18px}
.mtco-title em{font-style:normal; opacity:.95}
.mtco-sub{font-size:12px; color:var(--mtco-muted); margin-top:3px}
.mtco-spacer{flex:1}
.mtco-chip{
  display:inline-flex; align-items:center; gap:8px;
  padding:8px 12px; border-radius:999px;
  border:1px solid var(--mtco-border);
  background:var(--mtco-panel);
  color:var(--mtco-text); text-decoration:none; font-weight:700
}
.mtco-chip:hover{ border-color:#3a424b }
.mtco-chip.disabled{ opacity:.55; cursor:not-allowed; pointer-events:none }
@media (max-width: 960px){ .mtco-sub{ display:none } }

</style>
</head>
<body>

<!-- MTCO Unified Header v1.3 -->
<header class="mtco-header" role="banner">
  <div class="mtco-hwrap">
    <a class="mtco-logo" id="mtcoHomeLogo" href="index.html" aria-label="MTCO Home"></a>
    <div class="mtco-brand">
      <span class="mtco-title">MTCO | <em>Thread Data Wizard</em></span>
      <span class="mtco-sub">ISO/UNC basics with drill suggestions</span>
    </div>
    <div class="mtco-spacer"></div>
    <a class="mtco-chip disabled" id="mtcoGuideChip" href="#">Guide</a>
    <a class="mtco-chip" id="mtcoHomeChip" href="index.html">Home</a>
  </div>
</header>


<div class="container">
    <div class="card">
      <h1>Thread Data Wizard <span class="badge">v1 (basic geometry)</span></h1>
      <p class="note">60° V-threads only (UN & ISO). Values are basic theoretical (no tolerance class). Use as a starting point and verify against shop charts/gauges.</p>
    </div>

    <div class="grid">
      <div class="card">
        <h2>Inputs</h2>
        
<div class="row">
  <label for="std">Standard</label>
  <select id="std">
    <option value="ISO">ISO Metric (M)</option>
    <option value="UN">Unified (UNC/UNF)</option>
  </select>
</div>
<div class="row" id="sizePicker">
  <label class="small" for="nomMajor">Nominal major</label>
  <select id="nomMajor" style="min-width:140px;margin-right:8px"></select>
  <label class="small" for="nomPitch">Pitch / TPI</label>
  <select id="nomPitch" style="min-width:140px"></select>
</div>
        <hr>
        <div id="isoFields">
          <div class="row"><label for="m_major">Major (mm)</label><input type="number" id="m_major" step="0.01" value="12"></div>
          <div class="row"><label for="m_pitch">Pitch P (mm)</label><input type="number" id="m_pitch" step="0.01" value="1.75"></div>
        </div>
        <div id="unFields" style="display:none">
          <div class="row"><label for="u_major">Major (inch)</label><input type="number" id="u_major" step="0.001" value="0.5"></div>
          <div class="row"><label for="u_tpi">Threads per inch (TPI)</label><input type="number" id="u_tpi" step="1" value="13"></div>
        </div>
        <hr>
        <div class="row"><label for="allow_ext">Blank allowance (external major)</label>
          <input type="number" id="allow_ext" step="0.01" value="0.05">
          <span class="note">as % of pitch (default 5%)</span>
        </div>
        <div class="row"><label for="finish_allow">Finish allowance on diameters</label>
          <input type="number" id="finish_allow" step="0.01" value="0.00">
          <span class="note">mm or inch (applied to suggestions)</span>
        </div>
        <div class="row" style="margin-top:10px">
          <button class="btn" id="btnMetric" type="button">Metric example (M12×1.75)</button>
          <button class="btn" id="btnInch" type="button">Inch example (1/2-13 UNC)</button>
          <button class="btn primary" id="btnCalc" type="button">Calculate</button>
        </div>
        <p class="print-hint note">Tip: File → Print (A4/Letter) to take this to the machine.</p>
      </div>

      <div class="card">
        <h2>Results</h2>
        <div class="kv">
          <div>Standard</div><div class="v" id="out_std">—</div>
          <div>Designation</div><div class="v" id="out_name">—</div>
          <div>Pitch P</div><div class="v" id="out_pitch">—</div>
        </div>

        <table class="table" id="tbl">
          <thead>
            <tr><th>Item</th><th>Formula (basic)</th><th>Value</th></tr>
          </thead>
          <tbody>
            <tr><td>Pitch diameter (basic)</td><td><code>D<sub>p</sub> = D<sub>maj</sub> − 0.649519·P</code></td><td id="val_pd">—</td></tr>
            <tr><td>External minor (basic)</td><td id="formula_extmin">—</td><td id="val_extmin">—</td></tr>
            <tr><td>Internal minor (basic)</td><td><code>D<sub>min,int</sub> = D<sub>maj</sub> − 1.082532·P</code></td><td id="val_intmin">—</td></tr>
            <tr><td>Tap drill (rule-of-thumb)</td><td id="formula_tap">—</td><td id="val_tap">—</td></tr>
            <tr><td>External blank major (suggested)</td><td><code>D<sub>blank</sub> = D<sub>maj</sub> − (allowance · P)</code></td><td id="val_blank">—</td></tr>
          </tbody>
        </table>

        <p class="note" style="margin-top:8px">
          Notes: pitch diameter and depth relations assume 60° V form. External/internal minors are basic (no class/tolerance). Tap drill is a rule-of-thumb (major − pitch).
        </p>
      </div>
    </div>
  </div>

<script>
const $ = sel => document.querySelector(sel);
const fmt = (v, unit) => (isNaN(v) ? "—" : (Math.round(v*1000)/1000).toFixed(3) + " " + unit);

function currentInputs(){
  const std = $("#std").value;
  if(std === "ISO"){
    return {std, major: +$("#m_major").value, pitch: +$("#m_pitch").value, unit:"mm", tpi:null};
  }else{
    const tpi = +$("#u_tpi").value || 1;
    const P = 1/tpi;
    return {std, major: +$("#u_major").value, pitch: P, unit:"in", tpi};
  }
}

function calc(){
  const {std, major, pitch:P, unit, tpi} = currentInputs();
  const allow = (+$("#allow_ext").value || 0)/100 * P;
  const finish = +$("#finish_allow").value || 0;

  // Pitch diameter (both)
  const pd = major - 0.64951905 * P;

  // External minor (basic) depends on standard
  const k_ext = (std==="ISO") ? 1.226869 : 1.299038; // ISO vs UN
  const extmin = major - k_ext * P;

  // Internal minor (basic, 60°)
  const intmin = major - 1.082532 * P;

  // Tap drill rule-of-thumb
  const tap = major - P;

  // External blank suggestion
  const blank = (major - allow);

  // Apply optional finish allowance to suggested values (show as +/-)
  const pd_adj = pd; // not adjusted by finish; it's a basic dimension
  const extmin_adj = extmin + finish; // raising minor a touch as a finishing target
  const intmin_adj = intmin - finish; // lowering internal minor as a finishing target
  const blank_adj = blank - finish;

  // Output
  $("#out_std").textContent = std;
  const name = (std==="ISO") ? (`M${(Math.round(major*100)/100)}×${P}`) : (`${major.toFixed(3)} - ${tpi} UN`);
  $("#out_name").textContent = name;
  $("#out_pitch").textContent = P.toFixed(4) + " " + unit;

  $("#val_pd").textContent = fmt(pd_adj, unit);
  $("#val_extmin").textContent = fmt(extmin_adj, unit);
  $("#val_intmin").textContent = fmt(intmin_adj, unit);
  $("#val_tap").textContent = fmt(tap, unit);
  $("#val_blank").textContent = fmt(blank_adj, unit);

  // Formula labels
  $("#formula_extmin").innerHTML = (std==="ISO")
    ? "<code>D<sub>min,ext</sub> = D<sub>maj</sub> − 1.226869·P</code>"
    : "<code>d<sub>min,ext</sub> = d<sub>nom</sub> − 1.299038·P</code>";
  $("#formula_tap").innerHTML = (std==="ISO")
    ? "<code>Tap drill ≈ major − pitch</code>"
    : "<code>Tap drill ≈ major − pitch (1/TPI)</code>";
}

$("#std").addEventListener("change", ()=>{
  const iso = $("#std").value==="ISO";
  $("#isoFields").style.display = iso ? "" : "none";
  $("#unFields").style.display = iso ? "none" : "";
});

$("#btnMetric").addEventListener("click", ()=>{
  $("#std").value = "ISO";
  $("#isoFields").style.display = "";
  $("#unFields").style.display = "none";
  $("#m_major").value = 12;
  $("#m_pitch").value = 1.75;
  calc();
});

$("#btnInch").addEventListener("click", ()=>{
  $("#std").value = "UN";
  $("#isoFields").style.display = "none";
  $("#unFields").style.display = "";
  $("#u_major").value = 0.5;
  $("#u_tpi").value = 13;
  calc();
});

$("#btnCalc").addEventListener("click", calc);
calc();
</script>
<script>

// --- Quick View bindings for tap drills at the top ---
(function(){
  const topTableMM = document.getElementById('twTopTableMM');
  const topTableIN = document.getElementById('twTopTableIN');
  const topTableName = document.getElementById('twTopTableName');
  const topCalcMM = document.getElementById('twTopCalcMM');
  const topCalcIN = document.getElementById('twTopCalcIN');
  const topPctSpan = document.getElementById('twTopPct');
  const pct = document.getElementById('twPct');
  const selUse = document.getElementById('twUse');

  // Bridge to earlier functions if present
  function setTopTable(mm, inch, name){
    if(topTableMM) topTableMM.textContent = isFinite(mm)? mm.toFixed(2) : '—';
    if(topTableIN) topTableIN.textContent = isFinite(inch)? inch.toFixed(3) : '—';
    if(topTableName) topTableName.textContent = name ? `(${name})` : '';
  }
  function setTopCalc(mm, inch){
    if(topCalcMM) topCalcMM.textContent = isFinite(mm)? mm.toFixed(2) : '—';
    if(topCalcIN) topCalcIN.textContent = isFinite(inch)? inch.toFixed(3) : '—';
  }

  // Hook into the preset table updater if it exists
  const _updateTapTable = typeof updateTapTable === 'function' ? updateTapTable : null;
  if(_updateTapTable){
    window.updateTapTable = function(preset){
      _updateTapTable(preset);
      if(!preset){ setTopTable(NaN, NaN, ''); return; }
      if(preset.type === 'ISO'){
        const mm = preset.drill_mm;
        setTopTable(mm, mm/25.4, '');
      }else{
        const inch = preset.drill_in;
        setTopTable(inch*25.4, inch, preset.drill_name||'');
      }
    };
  }

  // Hook into the approx calc if exists; otherwise recompute here
  function recalcCalcTop(){
    if(!pct || !topPctSpan) return;
    const pctVal = Math.max(50, Math.min(85, parseFloat(pct.value)||75));
    topPctSpan.textContent = String(pctVal);
    try{
      // Read current inputs (mirror of wizard)
      const stdEl = document.getElementById('std');
      const m_major = document.getElementById('m_major');
      const m_pitch = document.getElementById('m_pitch');
      const u_major = document.getElementById('u_major');
      const u_tpi   = document.getElementById('u_tpi');
      let major_mm = NaN, pitch_mm = NaN;
      if(stdEl && stdEl.value === 'ISO'){
        major_mm = parseFloat(m_major?.value||'NaN');
        pitch_mm = parseFloat(m_pitch?.value||'NaN');
      }else{
        const maj_in = parseFloat(u_major?.value||'NaN');
        const tpi = parseFloat(u_tpi?.value||'NaN');
        major_mm = maj_in*25.4;
        pitch_mm = 25.4/(tpi||1);
      }
      if(isFinite(major_mm) && isFinite(pitch_mm)){
        const mm = Math.max(0, major_mm - pitch_mm*(pctVal/75));
        setTopCalc(mm, mm/25.4);
      }else{
        setTopCalc(NaN, NaN);
      }
    }catch(e){
      setTopCalc(NaN, NaN);
    }
  }

  // Wire events
  ['input','change'].forEach(ev=>{
    pct?.addEventListener(ev, recalcCalcTop);
    ['std','m_major','m_pitch','u_major','u_tpi'].forEach(id=>{
      const el = document.getElementById(id); el && el.addEventListener(ev, recalcCalcTop);
    });
  });

  // Initial
  recalcCalcTop();
})();

</script>
<script>
// === Size Picker: dropdowns for nominal major & pitch/TPI ===
(function(){
  const stdEl = document.getElementById('std');
  const majorSel = document.getElementById('nomMajor');
  const pitchSel = document.getElementById('nomPitch');

  const m_major = document.getElementById('m_major');
  const m_pitch = document.getElementById('m_pitch');
  const u_major = document.getElementById('u_major');
  const u_tpi   = document.getElementById('u_tpi');

  const ISO_THREADS = {
  "M1.6":[0.35,0.2],
  "M2":[0.4,0.25],
  "M2.5":[0.45,0.35],
  "M3":[0.5,0.35],
  "M3.5":[0.6,0.35],
  "M4":[0.7,0.5,0.35],
  "M5":[0.8,0.5],
  "M6":[1.0,0.75,0.5],
  "M7":[1.0,0.75],
  "M8":[1.25,1.0],
  "M10":[1.5,1.25,1.0],
  "M12":[1.75,1.5,1.25],
  "M14":[2.0,1.5],
  "M16":[2.0,1.5],
  "M18":[2.5,2.0,1.5],
  "M20":[2.5,2.0,1.5],
  "M22":[2.5,2.0],
  "M24":[3.0,2.0]
};

  const UN_THREADS = {
  "#6":[32],
  "#8":[32],
  "#10":[24,32],
  "1/4":[20,28],
  "5/16":[18,24],
  "3/8":[16,24],
  "7/16":[14,20],
  "1/2":[13,20]
};
  const UN_MAJOR_IN = {
  "#6":0.1380,
  "#8":0.1640,
  "#10":0.1900,
  "1/4":0.25,
  "5/16":0.3125,
  "3/8":0.375,
  "7/16":0.4375,
  "1/2":0.5
};

  function fillSelect(sel, arr, formatter){
    sel.innerHTML = "";
    arr.forEach(v=>{
      const opt = document.createElement('option');
      opt.value = v;
      opt.textContent = formatter? formatter(v): String(v);
      sel.appendChild(opt);
    });
  }

  function applyPickerToInputs(){
    if(!majorSel || !pitchSel) return;
    const std = (stdEl && stdEl.value) || 'ISO';
    const maj = majorSel.value;
    const pit = pitchSel.value;
    try{ if(typeof updateTapTable==='function') updateTapTable(null); }catch(e){}
    if(std === 'ISO'){
      const mmVal = parseFloat(maj.replace('M','')) || NaN;
      const pitch = parseFloat(pit);
      if(isFinite(mmVal) && isFinite(pitch)){
        if(m_major) m_major.value = mmVal.toString();
        if(m_pitch) m_pitch.value = pitch.toString();
        try{ recalc(); }catch(e){}
      }
    }else{
      const majIn = UN_MAJOR_IN[maj];
      const tpi = parseFloat(pit);
      if(isFinite(majIn) && isFinite(tpi)){
        if(u_major) u_major.value = majIn.toString();
        if(u_tpi)   u_tpi.value = tpi.toString();
        try{ recalc(); }catch(e){}
      }
    }
  }

  function refreshSizePicker(){
    if(!majorSel || !pitchSel || !stdEl) return;
    const std = stdEl.value || 'ISO';
    if(std === 'ISO'){
      const majors = Object.keys(ISO_THREADS);
      fillSelect(majorSel, majors, v=>v);
      if(!majors.includes(majorSel.value)) majorSel.value = 'M10';
      const pitches = ISO_THREADS[majorSel.value] || [];
      fillSelect(pitchSel, pitches, v=>`${v} mm`);
      if(!pitches.includes(parseFloat(pitchSel.value))) pitchSel.value = String(pitches[0]||'');
    }else{
      const majors = Object.keys(UN_THREADS);
      fillSelect(majorSel, majors, v=>v);
      if(!majors.includes(majorSel.value)) majorSel.value = '1/2';
      const tpis = UN_THREADS[majorSel.value] || [];
      fillSelect(pitchSel, tpis, v=>`${v} TPI`);
      if(!tpis.includes(parseFloat(pitchSel.value))) pitchSel.value = String(tpis[0]||'');
    }
    applyPickerToInputs();
  }

  stdEl && stdEl.addEventListener('change', refreshSizePicker);
  majorSel && majorSel.addEventListener('change', ()=>{
    const std = (stdEl && stdEl.value) || 'ISO';
    if(std === 'ISO'){
      fillSelect(pitchSel, ISO_THREADS[majorSel.value]||[], v=>`${v} mm`);
    }else{
      fillSelect(pitchSel, UN_THREADS[majorSel.value]||[], v=>`${v} TPI`);
    }
    applyPickerToInputs();
  });
  pitchSel && pitchSel.addEventListener('change', applyPickerToInputs);

  refreshSizePicker();
})();
</script>
<script>
(function(){
  if(window.__tw_init_std) return; window.__tw_init_std = true;
  var std = document.getElementById('std');
  if(std && !std.value){ std.value = 'ISO'; }
  try{ /* refresh size picker if available */ }catch(e){}
})();
</script>


<script>
(function(){
  var onPages = location.hostname.endsWith('github.io') && location.pathname.includes('/mtco/');
  var home = onPages ? '/mtco/' : 'index.html';
  var a1 = document.getElementById('mtcoHomeLogo');
  var a2 = document.getElementById('mtcoHomeChip');
  if (a1) a1.setAttribute('href', home);
  if (a2) a2.setAttribute('href', home);
})();
</script>

</body>
</html>